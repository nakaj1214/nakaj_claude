---
name: skill-generator
description: スキルを自動作成するメタスキル。ユーザーの要望から足りないスキルや汎用性の高いスキルを分析・生成する。
---

# スキル自動生成 スキル

ユーザーの要望や会話の文脈から、必要なスキルを分析し、claude_code_tests/skillsディレクトリに新しいスキルを自動生成する。

## このスキルを使う場面

- ユーザーが「〜するスキルがほしい」と依頼したとき
- 繰り返し同じ種類のタスクを依頼されており、汎用スキル化すると効率が上がるとき
- 既存スキルでカバーされていない新しいドメインや技術に関する依頼があったとき
- ユーザーが明示的にスキル作成を依頼したとき

## 指示

### ステップ1: 要件分析

1. ユーザーの要望を分析し、必要なスキルの目的を特定する
2. 以下の観点で要件を整理する:
   - **対象ドメイン**: 何に関するスキルか（言語、フレームワーク、タスク種別）
   - **トリガー条件**: どんな依頼で使用されるか
   - **期待される振る舞い**: 何を出力・実行するか
   - **汎用性**: 他のプロジェクトでも使えるか

### ステップ2: 既存スキルの重複チェック

1. `claude_code_tests/skills/` 内の全スキルを確認
2. 類似スキルがないか以下を確認:
   - 同じドメインを扱うスキル
   - 同じ目的を持つスキル
   - 名前が似ているスキル
3. 重複がある場合は、既存スキルの拡張か新規作成かを判断
4. 判断基準:
   - 機能の重複が50%以上 → 既存スキルを拡張
   - 目的が異なる → 新規スキルを作成
   - 補完関係にある → 新規作成し関連スキルとしてリンク

### ステップ3: スキル設計

以下の構成で設計を行う:

```markdown
## スキル設計書

### 基本情報
- スキル名: [kebab-case]
- 説明: [50文字以内の要約]
- 対象ドメイン: [技術/タスク種別]

### トリガー条件
- [条件1]
- [条件2]

### 主要機能
1. [機能1]
2. [機能2]

### 出力形式
[期待される出力の形式や構造]

### 関連スキル
- [既存スキル名]: [関係性]
```

### ステップ4: スキル生成

SKILL_TEMPLATE.mdに従って新しいスキルを生成:

```markdown
---
name: [skill-name]
description: [説明文。50文字以内。]
---

# [スキル名] スキル

[スキルの概要説明]

## このスキルを使う場面

- [使用場面1]
- [使用場面2]

## 指示

### ステップ1: [ステップ名]
[詳細な指示]

### ステップ2: [ステップ名]
[詳細な指示]

## 例

### 例1: [例の名前]
**ユーザーの依頼:**
[依頼内容]

**期待される振る舞い:**
[応答内容]

## ガイドライン

- [ガイドライン1]
- [ガイドライン2]

## よくある落とし穴

- [落とし穴1]
- [落とし穴2]

## 関連スキル

- [関連スキル]: [関係性]
```

### ステップ5: 検証とフィードバック

1. 生成したスキルの整合性を確認:
   - フロントマターが正しい形式か
   - 全セクションが揃っているか
   - 例が具体的で実行可能か
2. ユーザーにレビューを依頼
3. 必要に応じて調整

## スキルカテゴリ判定

生成するスキルは以下のカテゴリに分類:

| カテゴリ | 説明 | 例 |
|---------|------|-----|
| 言語/フレームワーク | 特定技術に関するベストプラクティス | react-hooks, vba-core |
| タスク種別 | 特定のタスクの進め方 | code-review, brainstorming |
| ワークフロー | 複数ステップの作業プロセス | tdd-workflow, planning-with-files |
| ツール連携 | 外部ツールとの連携方法 | git-worktrees, gemini-cli |

## 汎用スキル候補の自動検出

以下のパターンを検出した場合、自動的にスキル化を提案:

### 検出パターン

1. **繰り返しパターン**: 同じ種類の依頼が3回以上続いた場合
2. **定型作業**: 決まった手順で行う作業
3. **ドメイン固有知識**: 特定分野の専門知識が必要な場合
4. **出力形式の固定**: 常に同じフォーマットで出力が必要な場合

### 提案テンプレート

```markdown
## スキル化提案

**検出パターン**: [パターン名]
**理由**: [なぜスキル化が有効か]
**提案スキル名**: [skill-name]
**想定効果**:
- [効果1]
- [効果2]

スキルを作成しますか？
```

## 例

### 例1: 新しい技術スキルの作成

**ユーザーの依頼:**
```
TypeScriptのテスト関連のスキルがほしい
```

**期待される振る舞い:**
1. 既存スキルを確認（tdd-workflow.mdがテスト関連だが、TypeScript特化ではない）
2. typescript-testing.md を新規作成
3. 内容: Jest/Vitest設定、型安全なモック、テストユーティリティなど

### 例2: タスク種別スキルの作成

**ユーザーの依頼:**
```
APIドキュメントを書くのに毎回同じ形式でお願いしている。スキルにできる？
```

**期待される振る舞い:**
1. API文書化の要件をヒアリング
2. api-documentation.md を生成
3. 内容: OpenAPI形式、エンドポイント記述テンプレート、サンプルリクエスト/レスポンス

### 例3: 汎用スキルの自動提案

**検出状況:**
- ユーザーがデータベースマイグレーションの相談を3回実施
- 毎回同じような確認事項と手順を説明

**期待される振る舞い:**
```markdown
## スキル化提案

**検出パターン**: 繰り返しパターン
**理由**: データベースマイグレーションの相談が複数回あり、手順が定型化可能
**提案スキル名**: database-migration
**想定効果**:
- マイグレーション前の確認事項を漏れなくカバー
- ロールバック計画の標準化
- 本番適用時のチェックリスト提供

スキルを作成しますか？
```

## ガイドライン

- **具体性**: 抽象的すぎるスキルは避ける（「プログラミング」ではなく「react-hooks」）
- **再利用性**: 1プロジェクト限定ではなく、汎用的に使えるものを優先
- **粒度**: 1スキル = 1つの明確な目的（複合的なものは分割）
- **命名規則**: kebab-caseで、内容が推測できる名前
- **日本語**: スキル内容は日本語で記述（既存スキルに合わせる）

## よくある落とし穴

- **過度な汎用化**: 何でもできるスキルは何もできない
- **既存スキルとの重複**: 確認せずに似たスキルを作成してしまう
- **例の不足**: 具体例がないと使い方が分からない
- **トリガー条件の曖昧さ**: いつ使うか明確でないと活用されない

## スキル名命名規則

```
[ドメイン]-[サブドメイン/目的]

例:
- react-hooks (ドメイン: react, 目的: hooks)
- vba-excel (ドメイン: vba, サブドメイン: excel)
- code-review (ドメイン: code, 目的: review)
- systematic-debugging (修飾語-目的)
```

## 生成後チェックリスト

- [ ] フロントマター（name, description）が正しい
- [ ] 「このスキルを使う場面」が具体的
- [ ] ステップが論理的に並んでいる
- [ ] 例が2つ以上ある
- [ ] ガイドラインが実践的
- [ ] よくある落とし穴が記載されている
- [ ] 関連スキルがリンクされている
- [ ] ファイル名が命名規則に従っている

## 関連スキル

- [brainstorming](brainstorming.md): スキル要件の深掘り
- [writing-plans](writing-plans.md): スキル設計の計画化
- [code-review](code-review.md): 生成したスキルのレビュー
