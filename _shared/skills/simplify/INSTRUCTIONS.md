# コードを簡素化

$ARGUMENTS を簡素化・リファクタリングする。

## 簡素化の原則

1. **単一責任** - 1つの関数 = 1つのこと
2. **短い関数** - 20行未満を目標とする
3. **浅いネスト** - アーリーリターン、深さ ≤ 2
4. **明確な命名** - コメントが不要なほど明確に
5. **型ヒント必須** - 全関数に付与する

## ステップ

### 1. 対象コードを分析する

- ファイルを読み込み、現在の構造を理解する
- 複雑性のホットスポットを特定する（深いネスト、長い関数）
- 簡素化すべき関数/クラスをリストアップする

### 2. ライブラリの制約を確認する

- 対象コードで使用されているライブラリを特定する
- `.claude/docs/libraries/` で制約を確認する
- 不明なライブラリの挙動はウェブ検索で調べる

### 3. リファクタリングを計画する

各複雑性の問題について:
- 行うべき変更内容
- 可読性が向上する理由
- ライブラリの使用方法を壊さないことを確認

### 4. リファクタリングを実行する

以下のパターンに従って変更を適用する:

**アーリーリターン:**
```python
# 変更前
def process(value):
    if value is not None:
        if value > 0:
            return do_something(value)
    return None

# 変更後
def process(value):
    if value is None:
        return None
    if value <= 0:
        return None
    return do_something(value)
```

**関数の抽出:**
```python
# 変更前
def main():
    # 50行の混在した処理
    ...

# 変更後
def main():
    data = load_data()
    result = process_data(data)
    save_result(result)
```

### 5. テストで検証する

```bash
uv run pytest -v
```

## 注記

- 常にライブラリの機能/制約を維持する
- 不明な点はウェブ検索する
- 動作を変更しない（リファクタリングのみ）
- 重要な変更後は毎回テストを実行する
