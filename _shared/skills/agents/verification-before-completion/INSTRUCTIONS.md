# 完了前の検証

## 概要

検証なしに作業が完了したと主張することは、効率ではなく不誠実さ。

**核心原則:** 主張の前に常に証拠を。

**このルールの文字を違反することは、精神を違反すること。**

## 絶対のルール

```
新鮮な検証の証拠なしに完了の主張をしてはならない
```

このメッセージで検証コマンドを実行していない場合、パスすると主張することはできない。

## ゲート関数

```
いかなるステータスの主張や満足の表現をする前に:

1. 特定: この主張を証明するコマンドは何か？
2. 実行: FULLコマンドを実行する（新鮮に、完全に）
3. 読む: 完全な出力を読み、終了コードを確認し、失敗数を数える
4. 検証: 出力が主張を確認するか？
   - いいえの場合: 証拠とともに実際のステータスを述べる
   - はいの場合: 証拠とともに主張する
5. その後のみ: 主張する

いずれかのステップをスキップ = 検証ではなく嘘
```

## よくある失敗

| 主張 | 必要なもの | 不十分なもの |
|------|-----------|------------|
| テストが通る | テストコマンドの出力: 0件失敗 | 前回の実行、「通るはず」 |
| リンタークリーン | リンター出力: 0件エラー | 部分チェック、推測 |
| ビルド成功 | ビルドコマンド: 終了コード0 | リンターパス、ログが良さそう |
| バグ修正 | 元の症状をテスト: パス | コード変更、修正を推定 |
| リグレッションテスト動作 | レッド-グリーンサイクル検証 | テストが一度パス |
| エージェント完了 | VCSの差分が変更を示す | エージェントの「成功」報告 |
| 要件充足 | 行ごとのチェックリスト | テストがパス |

## 危険サイン - STOP

- 「〜のはず」「おそらく」「〜のようだ」を使っている
- 検証前に満足を表現している（「完了！」「完璧！」「できた！」など）
- 検証なしでコミット/プッシュ/PRをしようとしている
- エージェントの成功報告を信頼している
- 部分的な検証に頼っている
- 「今回だけ」と考えている
- 疲れていて作業を終わりにしたい
- **検証を実行せずに成功を示唆するいかなる言い回しも**

## 合理化防止

| 言い訳 | 現実 |
|--------|------|
| 「今は動くはず」 | 検証を実行する |
| 「自信がある」 | 自信 ≠ 証拠 |
| 「今回だけ」 | 例外なし |
| 「リンターがパスした」 | リンター ≠ コンパイラ |
| 「エージェントが成功と言った」 | 独立して検証する |
| 「疲れている」 | 疲労 ≠ 言い訳 |
| 「部分チェックで十分」 | 部分は何も証明しない |
| 「違う言い方なのでルールは適用されない」 | 精神 > 文字 |

## 主要なパターン

**テスト:**
```
✅ [テストコマンドを実行] [確認: 34/34パス] 「全テストがパスしました」
❌ 「今は通るはず」 / 「正しそう」
```

**リグレッションテスト（TDD レッド-グリーン）:**
```
✅ 書く → 実行（パス）→ 修正を元に戻す → 実行（必ず失敗）→ 復元 → 実行（パス）
❌ 「リグレッションテストを書いた」（レッド-グリーン検証なしで）
```

**ビルド:**
```
✅ [ビルドを実行] [確認: 終了コード0] 「ビルドがパスしました」
❌ 「リンターがパスした」（リンターはコンパイルを確認しない）
```

**要件:**
```
✅ 計画を再読 → チェックリスト作成 → 各項目を検証 → ギャップまたは完了を報告
❌ 「テストがパスした、フェーズ完了」
```

**エージェント委任:**
```
✅ エージェントが成功を報告 → VCSの差分を確認 → 変更を検証 → 実際の状態を報告
❌ エージェントの報告を信頼する
```

## なぜ重要なのか

24件の失敗の記憶から:
- ユーザーが「信じない」と言った - 信頼が失われた
- 未定義の関数がリリースされた - クラッシュするはずだった
- 不足した要件がリリースされた - 不完全な機能
- 偽の完了への時間の無駄 → 方向転換 → やり直し
- 違反: 「誠実さは核心的な価値。嘘をつくと交換される。」

## 適用すべき場合

**常に以下の前に:**
- 成功/完了の主張のいかなるバリエーションも
- 満足のいかなる表現も
- 作業状態についての肯定的な発言
- コミット、PR作成、タスク完了
- 次のタスクへの移行
- エージェントへの委任

**ルールの適用対象:**
- 正確なフレーズ
- 言い換えや同義語
- 成功の含意
- 完了/正確さを示唆するいかなるコミュニケーションも

## 結論

**検証のショートカットはない。**

コマンドを実行する。出力を読む。それから結果を主張する。

これは交渉の余地がない。
